

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="Overivew of MR.Diffusion" name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; mrdiffusion 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="mrdiffusion 1.0 documentation" href="index.html"/>
        <link rel="next" title="User Guide" href="userguide.html"/>
        <link rel="prev" title="Welcome to MR.Diffusion’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> mrdiffusion
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#system-requirement">System requirement</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-uninstall">Install/Uninstall</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#for-ms-windows-os">For MS Windows OS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#for-linux-os">For Linux OS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#key-functions-of-the-software">Key functions of the software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="userguide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="fileformat.html">Data format</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo.html">TO-DO List</a></li>
<li class="toctree-l1"><a class="reference internal" href="feedback.html">Suggestions/Feedback</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">mrdiffusion</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Overview</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/overview.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<script type="text/javascript"
src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({showMathMenu: false,tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script><p>MR. Diffusion is a light one-stop cross-platform solution to dMRI data analysis. The package delivers a complete pipeline from data format conversion to preprocessing, from local reconstruction to fiber tracking, and from fiber statistics to visualization. MR. Diffusion was developed as a cross-platform framework, using ITK <a href="#id9"><span class="problematic" id="id10"><span id="id1"></span>[1]_</span></a> for computation, VTK <a href="#id11"><span class="problematic" id="id12"><span id="id2"></span>[2]_</span></a> for visualization, and Qt for GUI design. Both GPU and CPU computing were implemented for visualization to achieve high frame-rate, for rendering complex scene like whole brain tractographs in particular. The project was managed using the compiler-independent CMake <a href="#id13"><span class="problematic" id="id14"><span id="id3"></span>[3]_</span></a>, which is compatible with gcc/g++ and MS Visual Studio, etc. Well-established algorithms, such as the DICOM conversion tool dcm2nii by Chris Rorden <a href="#id15"><span class="problematic" id="id16"><span id="id4"></span>[4]_</span></a> and the constrained spherical deconvolution (CSD) for HARDI reconstruction in MRtrix <a href="#id17"><span class="problematic" id="id18"><span id="id5"></span>[5]_</span></a>, were adopted with improved interface and user experience.</p>
<div class="section" id="system-requirement">
<h2>System requirement<a class="headerlink" href="#system-requirement" title="Permalink to this headline">¶</a></h2>
<p>Basically this software can run in any system, including 32/64-bit MS Windows/Linux OS, although currently we only tested and released the binary packages for Windows/Linux OS. The software is developed based on C/C++, and some platform independent packages, including ITK, VTK, and OpenCV, etc. However, for high-performance data processing and visualization, we recommend using 64-bit OS with multi-core CPU and standalone video card.</p>
</div>
<div class="section" id="install-uninstall">
<h2>Install/Uninstall<a class="headerlink" href="#install-uninstall" title="Permalink to this headline">¶</a></h2>
<p>Please download the package from <a class="reference external" href="http://brainnetome.org/en/brat-dMRI">http://brainnetome.org/en/brat-dMRI</a> , according to your own OS. Unpack the files to where you want and you can enjoy the software. The 64-bit OS is recommended for high-performance data processing. Each installation package is completely standalone so you DO NOT need to install ANY other dependency to run the software. If you encounter any dependency problem please DO <a class="reference external" href="mailto:mr&#46;diffusion&#37;&#52;&#48;nlpr&#46;ia&#46;ac&#46;cn">contact us</a>.</p>
<div class="section" id="for-ms-windows-os">
<h3>For MS Windows OS<a class="headerlink" href="#for-ms-windows-os" title="Permalink to this headline">¶</a></h3>
<p>Double click the <code class="docutils literal"><span class="pre">MRDiffusionSetup-vxxx.exe</span></code> file and then choose the destination path according to the wizard. You may need to provide administrator permission if you want to put the files into the system path. Similarly, to uninstall you only need to hit the menu of “uninstall” in the MS Windows start menu.</p>
</div>
<div class="section" id="for-linux-os">
<h3>For Linux OS<a class="headerlink" href="#for-linux-os" title="Permalink to this headline">¶</a></h3>
<p><code class="code docutils literal"><span class="pre">Glibc&gt;=2.2</span></code> is required. Download the <code class="docutils literal"><span class="pre">MRDiffusionSetup-vxxx.tar.gz</span></code>, and then</p>
<div class="highlight-bash"><div class="highlight"><pre>tar zxvf mrdiffusion.tar.gz
<span class="nb">cd </span>mrdiffusion
./xxxx <span class="o">(</span>you can run the <span class="nb">command </span>in this way<span class="o">)</span>
</pre></div>
</div>
<p>If you do not want to type the full path every time, you could add the path to the $PATH. Edit the ~/.bashrc file, then add the following line,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">export</span> <span class="nv">$PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/your/path/to/mrdiffusion
</pre></div>
</div>
<p>To uninstall the software, just manually remove the entire folder where you untar-ed the .tar.gz file.</p>
<p>That’s it! Enjoy the software now!</p>
</div>
</div>
<div class="section" id="key-functions-of-the-software">
<h2>Key functions of the software<a class="headerlink" href="#key-functions-of-the-software" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="_images/overall.png"><img alt="The overall design framework of MR. Diffusion" src="_images/overall.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-text">Figure 1. The overall design framework of MR. Diffusion.</span></p>
</div>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/mainwindow.png"><img alt="The main window of the software" src="_images/mainwindow.png" style="width: 800px;" /></a>
<p class="caption"><span class="caption-text">Figure 2. The main window of the software.</span></p>
</div>
<p>It should be noteworthy that, for all the computing steps provided in GUI, the called commands with the complete parameter list are displayed in a separate log window. Such a design is special for the users to keep in mind what he/she is doing, and furthermore, it could be directly copied into script (Bash, Python …) for batch processing.
Preprocessing</p>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="_images/preprocessing.png"><img alt="Data preprocessing steps" src="_images/preprocessing.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">Figure 3. Data preprocessing steps, including data format conversion, eddy current correction and brain extraction.</span></p>
</div>
<p>DICOM to NIFTI as unified data format</p>
<p>For saving space of data store, the nii.gz format was used throughout the whole pipeline. Firstly, we use the dcm2nii (by Chris Rorden, <a class="reference external" href="https://www.nitrc.org/projects/dcm2nii">https://www.nitrc.org/projects/dcm2nii</a>) to convert the data into a single 3/4D .nii.gz volume-series file, plus bval and bvec files. The format of bval file is</p>
<div class="highlight-python"><div class="highlight"><pre>0 1500 1500 …… 1500
</pre></div>
</div>
<p>and the format of bvec file is</p>
<div class="highlight-python"><div class="highlight"><pre>0  0.99944484233856   0.00215385644697   0.00269041745923 ...
0  -0.0053533311002   0.99836695194244   0.60518479347229 ...
0  0.03288444131613  -0.05708565562963   -0.79608047008514 ...
</pre></div>
</div>
<p>where the 0 in the first column indicates the b0 images in the scan and certainly the software also supports multi-b0 images. Since the DICOM formats from different scanner might be different, this function is not always able to successfully extract the bvec/bval files. If you encounter such a problem, please get back to us &lt;link&gt; and give the link of your data if it has big size beyond the email capability.</p>
<div class="highlight-bash"><div class="highlight"><pre>ccm@:bin$ ./dcm2nii -h
Compression will be faster with /usr/local/bin/pigz
Chris Rorden&#39;s dcm2niiX version 24Nov2014
usage: dcm2nii [options] &lt;in_folder&gt;
 Options :
  -h : show help
  -f : filename (%c=comments %f=folder name %p=protocol %i ID of patient %n=name of patient %s=series, %t=time; default &#39;DTI&#39;)
  -o : output directory (omit to save to input folder)
  -z : gz compress images (y/n, default n)
Defaults file : /home/ccm/.dcm2nii.ini
Examples :
 dcm2nii /Users/chris/dir
 dcm2nii -o /users/cr/outdir/ -z y ~/dicomdir
 dcm2nii -f mystudy%s ~/dicomdir
 dcm2nii -o &quot;~/dir with spaces/dir&quot; ~/dicomdir
Example output filename: &#39;/DTI.nii.gz&#39;
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="userguide.html" class="btn btn-neutral float-right" title="User Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to MR.Diffusion’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Brainnetome Center, CASIA.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>