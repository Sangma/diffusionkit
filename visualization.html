

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="Tutorial on Diffusion Kit" name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Guidelines on Data Visualization &mdash; DiffusionKit 1.1.0 beta documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="DiffusionKit 1.1.0 beta documentation" href="index.html"/>
        <link rel="up" title="Document" href="document.html"/>
        <link rel="next" title="Tutorial" href="tutorial.html"/>
        <link rel="prev" title="GUI Fornt-end of Data Processing Pipeline" href="frontend.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> DiffusionKit
          

          
          </a>

          
            
            
              <div class="version">
                1.1.0b
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="document.html">Document</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overivew</a></li>
<li class="toctree-l2"><a class="reference internal" href="userguide.html">Data Processing Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="frontend.html">GUI Fornt-end of Data Processing Pipeline</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Guidelines on Data Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#command-line-interface">Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#image-data-navigation">Image Data Navigation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#d-navigation">3D Navigation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">2D Navigation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#background-volume-data-layer">Background Volume Data Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#image-contrast-enhancement">Image Contrast Enhancement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-image-overlay">Volume Image Overlay</a></li>
<li class="toctree-l4"><a class="reference internal" href="#volume-rendering">Volume Rendering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#region-of-interest-roi-layer">Region of Interest (ROI) Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fiber-layer">Fiber Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tensor-odf-fod-layer">Tensor/ODF/FOD Layer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileformat.html">Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="todo.html">Future Improvements</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference.html">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="screenshot.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="feedback.html">Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">DiffusionKit</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="document.html">Document</a> &raquo;</li>
      
    <li>Guidelines on Data Visualization</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="guidelines-on-data-visualization">
<h1>Guidelines on Data Visualization<a class="headerlink" href="#guidelines-on-data-visualization" title="Permalink to this headline">¶</a></h1>
<p>In this page, the general functionality implemented in the <code class="code docutils literal"><span class="pre">bnviewer</span></code> program is
described in detail. This covers methods that a user can visualize almost all kinds of
diffusion MRI data.</p>
<p>Except those specially noticed, all the data should be formatted in either NIFTI or
ANAYLYZE image. NIFTI format is recommended, see <a class="reference internal" href="fileformat.html#data-format"><span>Data Format</span></a> page for more details.</p>
<div class="section" id="command-line-interface">
<h2>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h2>
<p>Typing <code class="code docutils literal"><span class="pre">bnviewer</span> <span class="pre">-h</span></code> in command line would given following information, which
help users to load a list of files without click them one by one.
The can be extremely useful when one wants to contantly load a large list of data files
to get screen capture images.</p>
<div class="highlight-bash"><div class="highlight"><pre>basic uage:
  bnviewer <span class="o">[[</span>-volume<span class="o">]</span> DTI_FA.nii.gz<span class="o">]</span>
           <span class="o">[</span>-roi ROI/roi_cc_top.nii.gz<span class="o">]</span>
           <span class="o">[</span>-fiber ROI/roi_cc_top.fiber<span class="o">]</span>
           <span class="o">[</span>-tensor DTI.nii.gz<span class="o">]</span>/<span class="o">[</span>-odf HARDI.nii.gz<span class="o">]</span>
           <span class="o">[</span>-atlas DTI.nii.gz<span class="o">]</span>

options:
  -help                  show this <span class="nb">help</span>
  -volume  .nii.gz       <span class="nb">set </span>input background data
  -roi     .nii.gz       <span class="nb">set </span>input ROI data
  -fiber   .fiber/.trk   <span class="nb">set </span>input fiber data
  -tensor  .nii.gz       <span class="nb">set </span>input DTI data <span class="o">(</span>conflict with -odf args<span class="o">)</span>
  -odf     .nii.gz       <span class="nb">set </span>input ODF/FOD data <span class="o">(</span>conflict with -tensor args<span class="o">)</span>
</pre></div>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">create interface for generating high quality images and save them into specified location.</p>
</div>
</div>
<div class="section" id="image-data-navigation">
<h2>Image Data Navigation<a class="headerlink" href="#image-data-navigation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="d-navigation">
<h3>3D Navigation<a class="headerlink" href="#d-navigation" title="Permalink to this headline">¶</a></h3>
<p>When an image data is loaded, one can change view angle by dragging <em>left</em> mouse button.
This is the default interactor style implemented in <cite>vtkInteractorStyleTrackballCamera</cite>,
which is used internally in our program. According to VTK&#8217;s documentation:</p>
<blockquote>
<div>vtkInteractorStyleTrackballCamera allows the user to interactively manipulate
(rotate, pan, etc.) the camera, the viewpoint of the scene.
In trackball interaction, the magnitude of the mouse motion is proportional
to the camera motion associated with a particular mouse binding.
For example, small left-button motions cause small changes in the rotation of
the camera around its focal point. For a 3-button mouse, the left button
is for <em>rotation</em>, the right button for <em>zooming</em>,
the middle button for <em>panning</em> (translation),
and ctrl + left button for <em>spinning</em>. (With fewer mouse buttons,
ctrl + shift + left button is for zooming, and shift + left button is for panning.)</div></blockquote>
<p>We simplify the trackball interaction to used middle button for both panning and zooming,
in order to spare right mouse click to popup option menu for more actions.</p>
<p>The background color for 3D view is defined as black by default.
This can be changed from context menu popped up when <em>right</em> mouse click event is captured.
By selecting the color from the popup color dialog, the background color is changed instantly.
Also, saving screenshots as PNG image is enabled from the context menu.
The default image is named after current timestamp to avoid naming duplication.</p>
</div>
<div class="section" id="id1">
<h3>2D Navigation<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Three 2D slice image views are placed below 3D view by default.
The three slice views from left to right are <em>sagittal plane, coronal plane</em> and
<em>axial plane</em> respectively.</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="_images/view_slice2d.png"><img alt="_images/view_slice2d.png" src="_images/view_slice2d.png" style="width: 420px;" /></a>
<p class="caption"><span class="caption-text"><em>sagittal plane, coronal plane</em> and <em>axial plane</em> (left to right)</span></p>
</div>
<p>2D slice view widget sizes can be enlarged by switching the overall layout.
This functionality is implemented in a single button, named <strong>Switch Layout</strong>,
available on the toolbar. By toggling the button, the main view panels switches
between 3D view port and a combination of sliced 2d views.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/view_slices.png"><img alt="_images/view_slices.png" src="_images/view_slices.png" style="width: 300px;" /></a>
</div>
<p>Image slice index can be changed by clicking on 2d image slice views.
Besides, we perform radiological/neurological (or RAS/LAS) conversion intantly when slice index
values are changed.</p>
<p>For people interested in more details about the radiological/neurological conversion,
please refer to FSL&#8217;s <a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/Orientation%20Explained">Orientation Explained</a> .</p>
</div>
</div>
<div class="section" id="background-volume-data-layer">
<h2>Background Volume Data Layer<a class="headerlink" href="#background-volume-data-layer" title="Permalink to this headline">¶</a></h2>
<p>Beginning from this section, several kinds of &#8216;layers&#8217; are described.
Each &#8216;layer&#8217; may be contrain one or more data that holds the same property.
By default, the layers manager is located at top-right side of the window.</p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="_images/overlaymgr.png"><img alt="_images/overlaymgr.png" src="_images/overlaymgr.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">The layers manager</span></p>
</div>
<p>We refer to <em>Background</em> data as plain 3D or 4D volume data that user wants to visualize
its sliced views.
The content should be either a typical 3D image (e.g. T1/T2 image) or a 4D image
such as DWI, DTI, ODF and even fMRI data.</p>
<p>To load a Background Data, click <strong>Load Background</strong> in the menu or toolbar,
and select a single volume image.
Note that selecting multiple image is not valid here, because the program
doesn&#8217;t aware which background image is laid that the bottom that might be
overlaid by subsequently loaded images.</p>
<p>Once background image is loaded, several basic data information is shown in the
data property panel.</p>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="_images/view_bgprop.png"><img alt="_images/view_bgprop.png" src="_images/view_bgprop.png" style="width: 300px;" /></a>
<p class="caption"><span class="caption-text">property panel showing mni152 as background image</span></p>
</div>
<p>The widget below the data property panel is the color table for <a class="reference internal" href="#volume-rendering"><span>Volume Rendering</span></a>.
The horizontal axis indicates intensity values of a target image, while
the vertical axis of the widget indicate the opacity value that maps the intensity values
onto visible planes in volume rendering. One can adjust opacity map (by dragging blue opacity nodes)
as well as color map to get proper renderering results.</p>
<div class="section" id="image-contrast-enhancement">
<h3>Image Contrast Enhancement<a class="headerlink" href="#image-contrast-enhancement" title="Permalink to this headline">¶</a></h3>
<p>During loading a Background image, the minimum and maximum intensity values are
calculated and displayed in the data property panel.
By narrow down the range of image intensity values, one can the enhance image contrast.</p>
<p>Note that this functionality is currently applied for 2d sliced views only.</p>
</div>
<div class="section" id="volume-image-overlay">
<span id="id2"></span><h3>Volume Image Overlay<a class="headerlink" href="#volume-image-overlay" title="Permalink to this headline">¶</a></h3>
<p>By loading multiple image throught <strong>Load Background</strong> menu, one can place one image over another,
Therefore, it&#8217;s easy to make slice-to-slice comparison to find out image registration errors
by adjusting opacity values of the upper level image.</p>
<p>This feature can be quite useful for verifying <a class="reference internal" href="frontend.html#skull-stripping"><span>Skull Stripping</span></a> results.
After performing skull stripping, ...</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">PUT OVERLAY IMAGE HERE!</p>
</div>
</div>
<div class="section" id="volume-rendering">
<span id="id3"></span><h3>Volume Rendering<a class="headerlink" href="#volume-rendering" title="Permalink to this headline">¶</a></h3>
<p>Volume rendering of the background image can be enabled in <em>Data Property</em> panel.
Once volume rendering is enabled, a color table is shown to enable users to adjust
color map and opacity values that maps intensity values onto visible planes.
This functionality is particularly useful for visualizing skull-stripped T1 image,
where the folds that increase the surface area of the cortex can be
directly visible without threshold-based surface extraction.</p>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="_images/volrender.png"><img alt="_images/volrender.png" src="_images/volrender.png" style="width: 320px;" /></a>
<p class="caption"><span class="caption-text">volume rendering of mni152 data</span></p>
</div>
</div>
</div>
<div class="section" id="region-of-interest-roi-layer">
<h2>Region of Interest (ROI) Layer<a class="headerlink" href="#region-of-interest-roi-layer" title="Permalink to this headline">¶</a></h2>
<p>To describe the location of a specific region, we employ the ROI layer.
It outlines surface of the region on 3d view, along with a filled area on 2d slice views.</p>
<p>To open a ROI file, click on &#8216;Load ROI&#8217; from either menu or toolbar.
Note that loading multiple ROI data files that located within the same directory is allowed.
Therefore, one don&#8217;t have load splitted brain atlas files one-by-one.</p>
<p>To change the color of a selected ROI files, set Color to different value from
the data properties panel. This is useful when more than one ROI file is loaded,
and it&#8217;s hard to distinguish them by appearance.</p>
<p>To adjust transparency of the surface or the filled area in 2d views,
set opacity value of the selected fiber file to a value range form 0 to 1.</p>
<div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">compute the voxel-level volume size of a region, as well as its size in millimeters
(by multiplying spacing).</p>
</div>
</div>
<div class="section" id="fiber-layer">
<h2>Fiber Layer<a class="headerlink" href="#fiber-layer" title="Permalink to this headline">¶</a></h2>
<p>To display deterministic tractography results, the program generates and displays .fiber/.trk files
in either lines or tubes.
One can load fiber files by selecting <cite>Load Fiber</cite> either from menu or toolbar.
The definition of .fiber files is available at <a class="reference internal" href="fileformat.html#data-format"><span>Data Format</span></a> page.
The specification of .trk file format is available at
<a class="reference external" href="http://www.trackvis.org/docs/?subsect=fileformat">TrackVis</a>.</p>
<div class="figure align-center" id="id8">
<img alt="_images/view_fiber_prop.png" src="_images/view_fiber_prop.png" />
<p class="caption"><span class="caption-text">Fiber data properties panel</span></p>
</div>
<p>Basic fiber data statistics is available on data properties panel once an arbitary tract file
is loaded. The statistics information include number of fibers in a tract, average length of fibers and
total volume covered by the tract etc.
These information are generated during fiber tracking process, and there is extra computation during
online visualization.</p>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="_images/fiber_final.png"><img alt="_images/fiber_final.png" src="_images/fiber_final.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">A comparison of fibers rendered in different render types.</span></p>
</div>
<p>Several display options are available to provided high quality rendering results.
For performance reasons, tracts are rendered as slim lines by default.
Therefore, detail shapes of the fibers are not clearly visible.
However, location and orientation information of the lines are quite clear.
By adjusting <strong>Color Code</strong> and <strong>Render Type</strong>, one can easily visualize multiple fiber files.
On the above figure, two images on the left are fibers rendered as lines,
while the two images on the right are rendered as tubes.
Images on the top row are fibers rendered with directional coloring,
while fibers on the bottom row are signed to a single color.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that rendering whole brain fiber in &#8216;Tube&#8217; rendering type can be quite slow for
low performance computers. However, a progress bar would popup to show the current loading progress.
Also, we recommand storing whole brain fiber files as .trk format instead of .fiber file to
increase file loading efficiency.</p>
</div>
</div>
<div class="section" id="tensor-odf-fod-layer">
<h2>Tensor/ODF/FOD Layer<a class="headerlink" href="#tensor-odf-fod-layer" title="Permalink to this headline">¶</a></h2>
<p>Both diffusion tensor and ODF can be visualized within this layer.
After adjusting rendering parameters, the <strong>Render</strong> button should be pressed in order to
regenerate the scene. This prevents the time-consuming processing,
every time when users are trying to change the configuration.</p>
<div class="figure align-center" id="id10">
<img alt="_images/view_odf_prop.png" src="_images/view_odf_prop.png" />
<p class="caption"><span class="caption-text">Tensor/ODF/FOD data properties panel</span></p>
</div>
<p>Diffusion tensor (DTI) file input should be a typical 4D NIFTI image, with exactly six volumes.
The six values on each voxel represents entries in a 3x3 symmetric positive definite matrix.
Numerical definition can be found at <a class="reference internal" href="userguide.html#dti-reconstruction"><span>DTI Reconstruction</span></a> section.</p>
<p>Diffusion orientation distribution function (ODF) file input should be a 4d image, too.
However, it&#8217;s fourth dimension should be one of 15,28,45,66,91 etc.
If the format is incorrect, the program would refuse to load the image to avoid potential errors.
Numerical definition can be found at <a class="reference internal" href="userguide.html#spfi-reconstruction"><span>SPFI Reconstruction</span></a> and <a class="reference internal" href="userguide.html#csd-reconstruction"><span>CSD Reconstruction</span></a> section.</p>
<p>Due to performance reasons, ODF/FOD is rendered in low resolution by default.
For researchers who need high-resolution images for publication quality results, an option in
the properties panel is provided.</p>
<div class="figure align-center" id="id11">
<a class="reference internal image-reference" href="_images/odf_res_final.png"><img alt="_images/odf_res_final.png" src="_images/odf_res_final.png" style="width: 400px;" /></a>
<p class="caption"><span class="caption-text">A comparison of low/high resolution ODF rendering</span></p>
</div>
<script type="text/javascript" src="_static/jquery.js"></script>
<script type="text/javascript">
$(window).load(function(){
$('.wy-breadcrumbs-aside').hide();
$('.wy-table-responsive').css('margin-bottom','0px');
});
</script>
<script type="text/javascript"
src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({showMathMenu: false,tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script></div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="frontend.html" class="btn btn-neutral" title="GUI Fornt-end of Data Processing Pipeline" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2015, Brainnetome Center, CASIA.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1.0 beta',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>